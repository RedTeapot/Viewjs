/**
 * View.js v1.6.0-B201812071500
 * author: Billy, wmjhappy_ok@126.com
 * license: MIT
 */
!function(t,e){if("View"in t)return void console.error("Plugin name: 'View' has already been used.");t.View={}}(window),function(t,e){var n=function(){var t=function(t,e){this.type=t,this.timestamp=(new Date).getTime(),this.data=e,Object.freeze&&Object.freeze(this)};return function(e,n){var i={},r=function(t){i[t]=i[t]||[]};e.on=function(t,e){String(t).replace(/(\s*,){2,}/,",").toLowerCase().split(/\s*,\s*/).forEach(function(t){r(t),i[t].indexOf(e)==-1&&i[t].push(e)})},e.off=function(t,e){String(t).replace(/(\s*,){2,}/,",").toLowerCase().split(/\s*,\s*/).forEach(function(t){r(t);var n=i[t].indexOf(e);n!=-1&&i[t].splice(n,1)})},e.fire=function(e,a,o){arguments.length<3&&(o=!0),String(e).replace(/(\s*,){2,}/,",").toLowerCase().split(/\s*,\s*/).forEach(function(e){var u=new t(e,a),l=function(){r(e);for(var t=0;t<i[e].length;t++){var a=i[e][t];if("function"==typeof a)try{a.call(n,u)}catch(t){console.error(t,t.stack)}}};o?setTimeout(l,0):l()})}}}();t.View.eventDrive=n}(window),function(t,e){var n=function(){var t,e,n=function(){if(0!=arguments.length){var t=arguments,e=" "+String(arguments[0]),n=1;return e=e.replace(/([^\\])\{\}/g,function(e,i){var a=t.length-1<n?"{}":String(r(t[n]));return n++,i+a}),e=e.replace(/\\\{\}/g,"{}"),e.substring(1)}},i=function(){var t=new Date,e=(t.getFullYear(),"0"+String(t.getMonth()+1));e=e.substring(e.length-2);var n="0"+String(t.getDate());n=n.substring(n.length-2);var i="0"+String(t.getHours());i=i.substring(i.length-2);var r="0"+String(t.getMinutes());r=r.substring(r.length-2);var a="0"+String(t.getSeconds());return a=a.substring(a.length-2),e+n+" "+i+":"+r+":"+a},r=function(t){if(null==t)return null;if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return t;if("function"==typeof t)return"function "+t.name+"(){...}";if("object"!=typeof t||Array.isArray(t))return t instanceof Array?"["+t.map(function(t){return r(t)}).join(", ")+"]":t;if("[object Object]"!=String(t))return String(t);var e=JSON.stringify(t);if("{}"!=e)return e;try{var n={};for(var i in t)n[i]=r(t[i]);return JSON.stringify(n)}catch(t){return e}},a=function(t){return i()+" ["+t+"]: "},o={};!function(){var n=!0;t=function(){return n},e=function(t){n=t}}();var u=function(e){var i=!0;this.isEnabled=function(){return t()&&i},this.setIsEnabled=function(t){return i=t,this},this.getName=function(){return e},this.debug=function(){if(this.isEnabled()){var t=n.apply(null,arguments);console.debug(a(e)+t)}},this.info=function(){if(this.isEnabled()){var t=n.apply(null,arguments);console.info(a(e)+t)}},this.warn=function(){if(this.isEnabled()){var t=n.apply(null,arguments);console.warn(a(e)+t)}},this.error=function(){if(this.isEnabled()){var t=n.apply(null,arguments);console.error(a(e)+t)}},this.log=function(){if(this.isEnabled()){var t=n.apply(null,arguments);console.log(a(e)+t)}}},l=function(t){if(t in o)return o[t];var e=new u(t);return o[t]=e,e};return u.ofName=l,u.isGloballyEnabled=t,u.setIsGloballyEnabled=e,u}();n.globalLogger=n.ofName("View"),t.View.Logger=n}(window),function(ctx,name){var globalLogger=ctx.View.Logger.globalLogger,setDftValue=function(t,e,n){arguments.length<3&&(n=!1),t=t||{},e=e||{};for(var i in e)i in t&&!(i in t&&null==t[i]&&n)||(t[i]=e[i]);return t},defineReadOnlyProperty=function(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!1,writable:!1,enumerable:!0})},try2Apply=function(t,e,n){if(null!=t&&"function"==typeof t)try{t.apply(e,n)}catch(e){var i=e instanceof Error||null!=e&&"object"==typeof e&&"stack"in e,r="Error occured while executing function: {}. {}"+(i?" stack:\n{}":"");globalLogger.error(r,t.name,e,i?e.stack:null)}},try2Call=function(func,ctx,args){if(null!=func&&"function"==typeof func)try{var len=arguments.length;if(1===len)return func();if(2===len)return func.call(ctx);if(3===len)return func.call(ctx,arguments[2]);if(4===len)return func.call(ctx,arguments[2],arguments[3]);if(5===len)return func.call(ctx,arguments[2],arguments[3],arguments[4]);if(6===len)return func.call(ctx,arguments[2],arguments[3],arguments[4],arguments[5]);if(7===len)return func.call(ctx,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);for(var tmp="",index=2,i=2;i<arguments.length;i++)tmp+=",arguments["+i+"]";var rst;return void eval("rst = func.call(ctx"+tmp+")")}catch(t){return void console.error("Error occured while executing function: "+func.name,t,t.stack)}},isEmptyString=function(t,e){return arguments.length<2&&(e=!1),null===t||void 0===t||(t=String(t),e&&(t=t.trim()),0===t.length)},isNullOrUndefined=function(t){return null===t||void 0===t},ifStringEquals=function(t,e,n,i){return arguments.length<4&&(i=!0),arguments.length<3&&(n=!0),isNullOrUndefined(t)?!!isNullOrUndefined(e):!isNullOrUndefined(e)&&(i&&(t=String(t).trim(),e=String(e).trim()),n||(t=t.toLowerCase(),e=e.toLowerCase()),t===e)},ifStringEqualsIgnoreCase=function(t,e,n){return arguments.length<3&&(n=!0),ifStringEquals(t,e,!1,n)},randomString=function(){var t="0123456789abcdefghijklmnopqrstuvwxyz";return function(e){arguments.length<1&&(e="");for(var n=10,i="";n-- >0;){var r=Math.floor(Math.random()*t.length);i+=t.charAt(r)}return e+i}}(),xEncodeURIComponent=function(t){return encodeURIComponent(String(t)).replace(/\+/gm,"%2B")},getUniqueString=function(){var t=0;return function(){var e=Date.now(),n=e.toString(36),i="00"+(t++).toString(36);return i=i.substring(i.length-2),(n+i).toUpperCase()}}(),getComputedStyle=function(t){return window.getComputedStyle?window.getComputedStyle(t):t.currentStyle},env=function(){var t=navigator.userAgent,e=/(?:MQQBrowser|QQ)/.test(t),n=/(?:UCWEB|UCBrowser)/.test(t),i=/(?:Safari)/.test(t),r=/(?:Opera Mini)/.test(t),a=/(?:Mac OS)/.test(t),o=/(?:Android)/.test(t),u=/(?:Windows Phone)/.test(t),l=a&&/(?:iPad)/.test(t),s=a&&/(?:iPhone)/.test(t),f=/(?:Tablet|PlayBook)/.test(t)||l,c=/(?:Mobile)/.test(t)&&!l||u,d=!c&&!f,g={},h=function(){g.isQB=e,g.isUC=n,g.isSafari=i,g.isOpera=r,g.isIOS=a,g.isAndroid=o,g.isWindowsPhone=u,g.isIPad=l,g.isIPhone=s,g.isTablet=f,g.isMobile=c,g.isPc=d},v=function(){return t=navigator.userAgent,e=/(?:MQQBrowser|QQ)/.test(t),n=/(?:UCWEB|UCBrowser)/.test(t),i=/(?:Safari)/.test(t),r=/(?:Opera Mini)/.test(t),a=/(?:Mac OS)/.test(t),o=/(?:Android)/.test(t),u=/(?:Windows Phone)/.test(t),l=a&&/(?:iPad)/.test(t),s=a&&/(?:iPhone)/.test(t),f=/(?:Tablet|PlayBook)/.test(t)||l,c=/(?:Mobile)/.test(t)&&!l||u,d=!c&&!f,h(),g};return g.refresh=v,v(),g}();ctx.View.util={setDftValue:setDftValue,defineReadOnlyProperty:defineReadOnlyProperty,try2Apply:try2Apply,try2Call:try2Call,isEmptyString:isEmptyString,isNullOrUndefined:isNullOrUndefined,ifStringEquals:ifStringEquals,ifStringEqualsIgnoreCase:ifStringEqualsIgnoreCase,randomString:randomString,xEncodeURIComponent:xEncodeURIComponent,getUniqueString:getUniqueString,getComputedStyle:getComputedStyle,env:env}}(window,"View"),function(t,e){var n=t.View.util,i=t.View.Logger,r=i.globalLogger,a=function(){var t=[],e=function(){var e;return function(i){clearTimeout(e),e=setTimeout(function(){for(var e=0;e<t.length;e++)n.try2Call(t[e],null,i)},20)}}(),i=function(){var t=document.documentElement;return t.clientWidth<=t.clientHeight},a=function(){var t=document.documentElement;return t.clientWidth>t.clientHeight},o=function(){var t=!1,n=-1,r=i(),a=function(){t=!0,n=Date.now()},u=function(){t=!1,n=-1},l=function(t){r==i()?setTimeout(o,20):(u(),r=i(),e(t))};return u(),function(e){if(t){Date.now()-n<500?l(e):u()}else a(),l(e)}}(),u=function(){var t,n=0,i=0,r=function(){n=0,i=0},a=function(){clearTimeout(t),t=setTimeout(e,20)},o=function(){var t=window.innerWidth,e=window.innerHeight,r=Math.abs(t-n);(0==n||r<.01&&e>i)&&(n=t,i=e,a())};return o.reset=r,o.try2ExecChangeCallbacks=a,o}();!function(){var t,i=null,a=function(){u.reset(),clearInterval(t),t=null},l=function(){a(),t=setInterval(u,50)};return function(){setInterval(function(){n.env.refresh(),n.env.isPc?("pc"!=i&&(r.debug("Page viewing mode to PC mode."),a(),window.removeEventListener("orientationchange",o),e(),window.addEventListener("resize",e)),i="pc"):("!pc"!=i&&(r.debug("Page viewing mode to none-PC mode."),window.removeEventListener("resize",e),e(),window.addEventListener("orientationchange",o),l()),i="!pc")},30)}}()();var l=function(e){t.indexOf(e)==-1&&t.push(e)},s={isPortrait:i,isLandscape:a,addChangeListener:l};return Object.freeze&&Object.freeze(s),s}();t.View.resolution=a}(window),function(t,e){var n=t.View.util,i=t.View.resolution,r=function(){var t=320/568,e=!0,r=[],a={},o=document.documentElement,u=function(){return o.querySelector("[data-view-container]")||document.body},l=function(){var t=u(),e=n.getComputedStyle(t),i=Number(e.paddingLeft.replace(/px/,"")),r=Number(e.paddingRight.replace(/px/,""));return isNaN(i)&&(i=0),isNaN(r)&&(r=0),t.clientWidth-i-r},s=function(){var t=u(),e=n.getComputedStyle(t),i=Number(e.paddingTop.replace(/px/,"")),r=Number(e.paddingBottom.replace(/px/,""));return isNaN(i)&&(i=0),isNaN(r)&&(r=0),t.clientHeight-i-r},f=function(){return window.innerWidth||o.clientWidth},c=function(){return window.innerHeight||o.clientHeight},d=function(){return l()<=s()},g=function(){return!isPortrait()},h=function(){return f()<=c()},v=function(){return!h()},p=function(){return f()/c()},w=function(){return f()/c()},m=function(){return t},y=function(e){return t=e,a},S=function(t,e){var n=this,i=n.style;i.width=t+"px",i.height=e+"px"},b=S,E=b,V=E,A=b,I=A,C=V,O=C,L=b,P=L,N=V,T=N,x=function(){var t=f(),e=c(),i=v()?V:b;n.try2Call(i,u(),t,e)},D=function(){var t=f(),e=c(),i=v()?O:I;n.try2Call(i,u(),t,e)},R=function(){var e=f(),i=c();h()?n.try2Call(P,u(),e,i):T===N?(e=i*t,n.try2Call(b,u(),e,i)):n.try2Call(T,u(),e,i)},W=function(t){if(r.indexOf(t)===-1)return r.push(t),a},k=function(t){var e=r.indexOf(t);if(e!==-1)return r.splice(e,1),a},q=function(){var t=l(),e=s();return function(i){arguments.length<1&&(i=!0),n.env.isPc?R():n.env.isTablet?D():x();var o=l(),u=s(),d=f(),g=c();if(Math.abs(t-o)>=.1||Math.abs(e-u)>=.1){var h=function(){for(var t=0;t<r.length;t++){var e=r[t];"function"==typeof e&&n.try2Call(e,null,o,u,d,g)}};i?setTimeout(h,0):h()}return a}}(),H=function(t){return t=n.setDftValue(t,{autoReLayoutWhenResize:!0,layoutAsMobilePortrait:b,layoutAsMobileLandscape:V,layoutAsTabletLandscape:O,layoutAsTabletPortrait:I,layoutAsPcPortrait:P,layoutAsPcLandscape:T}),e=!!t.autoReLayoutWhenResize,e&&i.addChangeListener(q),"function"==typeof t.layoutAsMobilePortrait&&(b=t.layoutAsMobilePortrait),"function"==typeof t.layoutAsMobileLandscape&&(V=t.layoutAsMobileLandscape),"function"==typeof t.layoutAsTabletPortrait&&(I=t.layoutAsTabletPortrait),"function"==typeof t.layoutAsTabletLandscape&&(O=t.layoutAsTabletLandscape),"function"==typeof t.layoutAsPcPortrait&&(P=t.layoutAsPcPortrait),"function"==typeof t.layoutAsPcLandscape&&(T=t.layoutAsPcLandscape),a};return(0,n.setDftValue)(a,{getLayoutWidth:l,getLayoutHeight:s,getBrowserWidth:f,getBrowserHeight:c,isLayoutPortrait:d,isLayoutLandscape:g,isBrowserPortrait:h,isBrowserLandscape:v,getLayoutWidthHeightRatio:p,getBrowserWidthHeightRatio:w,getExpectedWidthHeightRatio:m,setExpectedWidthHeightRatio:y,init:H,doLayout:q,addLayoutChangeListener:W,removeLayoutChangeListener:k}),Object.freeze&&Object.freeze(a),a}();t.View.layout=r}(window),function(t,e){var n=t.View.util,i=function(){var t=/mobile|tablet|ip(ad|hone|od)|android/i,e=(window,t.test(navigator.userAgent)),i="  __com.soft.plugin.touch#"+(new Date).getTime()+"__  ",r=function(t,e){return t=t||{},t[e]=t[e]||{},t[e]};return{addTapListener:function(t,a,o){if(!e)return void(t.addEventListener?t.addEventListener("click",a):t.attachEvent("onclick",a));var u=r(t,i+".tap");if(u.callbacks=u.callbacks||[],u.callbacks.indexOf(a)==-1){u.callbacks.push(a),o=n.setDftValue(o,{timespan:500,delta:{},useCapture:!1}),o.delta=n.setDftValue(o.delta,{x:10,y:15});var l=r(t,i+".tap.meta");null==l.touchstart&&(l.touchstart=function(t){var e=t.changedTouches?t.changedTouches[0]:t;u.startX=e.screenX,u.startY=e.screenY,u.startTimestamp=Date.now()},t.addEventListener("touchstart",l.touchstart)),null==l.touchend&&(l.touchend=function(e){var i=e.changedTouches?e.changedTouches[0]:e;u.stopX=i.screenX,u.stopY=i.screenY,u.stopTimestamp=Date.now();var r=u.stopTimestamp-u.startTimestamp,a=Math.abs(u.stopX-u.startX),l=Math.abs(u.stopY-u.startY);if(r<=o.timespan&&a<=o.delta.x&&l<=o.delta.y)for(var s=0;s<u.callbacks.length;s++)n.try2Call(u.callbacks[s],t,e)},t.addEventListener("touchend",l.touchend,o.useCapture))}},removeTapListener:function(t,n,a){if(!e)return void(t.removeEventListener?t.removeEventListener("click",n):t.detachEvent("onclick",n));if(t.hasOwnProperty(i)){var o=r(t,i+".tap"),u=o.callbacks.indexOf(n);if(u!=-1&&(o.callbacks.splice(u,1),0==o.callbacks.length)){var l=r(t,i+".tap.meta");t.removeEventListener("touchstart",l.touchstart),t.removeEventListener("touchend",l.touchend,a),delete t[i].tap}}}}}();t.View.touch=i}(window),function(t,e){var n=t.View.util,i=function(){var t={};n.defineReadOnlyProperty(this,"has",function(e){return e in t}),n.defineReadOnlyProperty(this,"set",function(e,n){return t[e]=n,this}),n.defineReadOnlyProperty(this,"get",function(e){return t[e]}),n.defineReadOnlyProperty(this,"remove",function(e){var n=t[e];return delete t[e],n}),n.defineReadOnlyProperty(this,"clear",function(){return t={},this})};t.View.ViewContext=i}(window),function(t,e){var n=t.View.Logger.globalLogger,i={},r=function(t,e,r){var a,o=t,u=i;this.getName=function(){return o},this.getValue=function(t){if(i==u){if(arguments.length<1)return;return t}return u},this.setValue=function(t,e){return arguments.length<2&&(e=!1),(e||i==u)&&(u=t),this},this.getApplication=function(){return a},this.setApplication=function(t){return"function"!=typeof t?(n.warn("Configuration application should be of type: 'Function'."),this):(a=t,this)},this.apply=function(){if("function"==typeof a)try{a.call(this,u)}catch(i){n.error("Fail to apply configuration: {} = {} for view of id: '{}' namespace: '{}'\n{}",t,String(u),e,r,i),i instanceof Error?console.error(i,i.stack):console.error(i)}return this},this.reflectToDom=function(){return null==e||""==e.trim()?this:View.ifExists(e,r)?(View.ofId(e,r).getDomElement().setAttribute("data-viewconfig_"+this.getName(),String(this.getValue())),this):(n.warn("No view of id '{}' namespace: '{}' found to reflect view config: {}={}.",e,r,this.getName(),this.getValue()),this)},Object.freeze(this)};t.View.ViewConfiguration=r}(window),function(t,e){var n=t.View.util,i=t.View.ViewConfiguration,r=function(t,e){var r={};this.has=function(t){return t in r},this.get=function(n){var a;return n in r?a=r[n]:(a=new i(n,t,e),r[n]=a),a},this.applyAll=function(){var t=Object.keys(r).map(function(t){return r[t]});if(0!=t.length)return setTimeout(function(){for(var e=0;e<t.length;e++){var i=t[e];n.try2Call(i.apply,i)}},0),this},this.listAll=function(){return Object.keys(r)}};t.View.ViewConfigurationSet=r}(window),function(t,e){var n=t.View.util,i=t.View.layout,r=t.View.Logger.globalLogger,a=document.documentElement,o={},u=function(){var t={},e=-1,u=-1,l=0,s=0,f=function(t,f){var c=function(){},d=!0,g=50,h=o;n.defineReadOnlyProperty(this,"setLayoutAction",function(e){return"function"!=typeof e?(r.error("Layout action for view of id: '{}' namespace: '{}' should be of type: Function.",t,f),this):(c!=e&&(h=o,c=e),this)}),n.defineReadOnlyProperty(this,"getLayoutAction",function(){return c}),n.defineReadOnlyProperty(this,"doLayout",function(){return"function"!=typeof c?this:((Math.abs(l-e)>.05||Math.abs(s-u)>.05)&&(a.offsetWidth=a.offsetHeight),c(),e=l,u=s,this)}),n.defineReadOnlyProperty(this,"setLayoutCushionTime",function(t){return null==t||isNaN(t=Number(t))||t<0?(r.error("Invalid layout cushion time. Should be a digit greater than or equal to 0."),this):(g=t,this)}),n.defineReadOnlyProperty(this,"getLayoutCushionTime",function(t){return g}),n.defineReadOnlyProperty(this,"setIfLayoutWhenLayoutChanges",function(t){return d=t,this});var v,p=this;i.addLayoutChangeListener(function(e,n){d&&View.ofId(t,f).isActive()&&(r.debug("Layout changes, doing layout for view of id: '{}' namespace: '{}'. Width: {}, height: {}",t,f,e,n),l=e,s=n,clearTimeout(v),g>0?v=setTimeout(function(){p.doLayout()},g):p.doLayout())})};return f.ofId=function(e,n){var i=e+"@"+n;if(i in t)return t[i];var r=new f(e,n);return t[i]=r,r},f.implIsPortrait=function(t){return r.warn("This method is redundant and deprecated and will be removed in the future."),f},f}();t.View.ViewLayout=u}(window),function(t,e){var n=t.View.util,i=function(){var t=n.randomString("ViewState_"),e=function(e,i,r,a){arguments.length<3&&(a=null),arguments.length<2&&(r=n.getUniqueString()),r=r||n.getUniqueString(),n.defineReadOnlyProperty(this,"viewId",e),n.defineReadOnlyProperty(this,"viewNamespace",i),n.defineReadOnlyProperty(this,"sn",r),n.defineReadOnlyProperty(this,"options",a),n.defineReadOnlyProperty(this,"flag",t),this.toString=function(){return JSON.stringify(this)},this.clone=function(){return JSON.parse(this.toString())}};return e.isConstructorOf=function(t){return null!=t&&"object"==typeof t&&(t.hasOwnProperty("viewId")&&t.hasOwnProperty("sn")&&String(t.flag).startsWith("ViewState_"))},e}();t.View.ViewState=i}(window),function(t,e){var n=t.View.util,i=function(){var t=n.randomString("OperationState_"),e=function(e,i){arguments.length<2&&(timeBasedUniqueString=n.getUniqueString()),timeBasedUniqueString=timeBasedUniqueString||n.getUniqueString(),n.defineReadOnlyProperty(this,"serialNumber",e),n.defineReadOnlyProperty(this,"sn",timeBasedUniqueString),n.defineReadOnlyProperty(this,"flag",t),this.toString=function(){return JSON.stringify(this)},this.clone=function(){return JSON.parse(this.toString())}};e.isConstructorOf=function(t){return null!=t&&"object"==typeof t&&(t.hasOwnProperty("serialNumber")&&t.hasOwnProperty("sn")&&String(t.flag).startsWith("OperationState_"))};var r=null,a={};return e.pushState=function(t,e){var n=new i(t).clone();history.pushState(n,"",""),r=n,a[t]=e},window.addEventListener("popstate",function(t){if(e.isConstructorOf(r)){var i=t.state&&t.state.sn&&t.state.sn<r.sn,o=a[r.serialNumber];i&&null!=o&&(n.try2Call(o),delete a[r.serialNumber])}var u=t.state;r=e.isConstructorOf(u)?u:null}),e}();t.View.OperationState=i}(window),function(t,e){var n=t.View.util,i=t.View.Logger,r=t.View.eventDrive,a=(i.globalLogger,{}),o=n.randomString("__ViewWantedDataListenFlag__"),u=(n.randomString("_@sep@_"),{}),l=function(t){var e=a;r(this,this);var i=this;this.want=function(t,i){return this.isFulfilled()?n.try2Call(t,null,e,{dataResolveMethod:"provideExisting"}):n.try2Call(i),this},this.listen=function(t){return this.isFulfilled()&&n.try2Call(t,null,e),"function"!=typeof t[o]&&(t[o]=function(e){n.try2Call(t,null,e.data)}),i.on("fulfilled",t[o]),this},this.fulfill=function(t){return e=t,this.fire("fulfilled",t),this},this.isFulfilled=function(){return a!==e}},s=function(t,e){var n=t+"@"+e;if(n in u)throw new Error("Instance for view of id: '"+t+"' namespace: '"+e+"' exists already.");var i={};this.ofName=function(t){return t in i?i[t]:(i[t]=new l(t),i[t])},this.want=function(t,e,n){return this.ofName(t).want(e,n)},this.listen=function(t,e){return this.ofName(t).listen(e)},this.fulfill=function(t,e){return this.ofName(t).fulfill(e)},this.isFulfilled=function(t){return this.ofName(t).isFulfilled()},u[n]=this};s.ofName=function(t,e,n){var i=t+"@"+e;return i in u?u[i].ofName(n):(u[i]=new s(t,e)).ofName(n)},t.View.ViewWantedData=s}(window),function(t,e){var n=t[e].util,i=t[e].eventDrive,r=(t[e].util.env,t[e].Logger),a=t[e].touch,o=t[e].layout,u=t[e].ViewState,l=t[e].OperationState,s=t[e].ViewConfigurationSet,f=t[e].ViewContext,c=t[e].ViewLayout,d=t[e].ViewWantedData,g=r.globalLogger,h=document.documentElement,v={},p=[],w={},m=null,y="320/568",S="pushState"in history&&"function"==typeof history.pushState;g.log("History pushState is "+(S?"":"not ")+"supported");var b=function(t){return":back"===t||":forward"===t||":default-view"===t},E=function(t,e){return t+"@"+e in w},V=function(t,e){return w[t+"@"+e]},A=function(t,e,n){w[t+"@"+e]=n},I=function(t,e,n){if(!k.ifExists(t,e)&&!b(t))throw new Error("View of id: "+t+" does not exist.");if(void 0===n&&(n=null),"object"!=typeof n)throw new Error("Parameters specified should be an object or null.");return A(t,e,n),k},C=function(t,e){return delete w[t+"@"+e],k},O=function(){return document.querySelectorAll("*[data-view=true]")},L=function(t){t in v||(v[t]=[])},P=function(t,e){(arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e);var i=document.querySelectorAll("#"+t+"[data-view=true]");if(0===i.length)return null;for(var r=null,a=0;a<i.length;a++){var o=i[a],u=o.getAttribute("data-view-namespace");if(n.isEmptyString(u,!0)&&(u="default"),u===e){r=o;break}}return r},N=function(t,e,i){var r=n.isEmptyString(e,!0)||"default"===e?"":"@"+String(e),a=String(t)+r,o=null==i?[]:Object.keys(i),u=o.reduce(function(t,e){return t+"&"+n.xEncodeURIComponent(e)+"="+n.xEncodeURIComponent(i[e])},"");return u.length>0&&(a+="!"+u.substring(1)),a},T=function(t,e,i,r){arguments.length<4&&(r=null),arguments.length<3&&(i=n.getUniqueString()),(arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e),i=i||n.getUniqueString();var a=new u(t,e,i,r).clone();g.log("↓ {}",JSON.stringify(a)),S?history.pushState(a,"","#"+N(t,e,r)):location.hash=N(t,e,r),k.currentState=a},x=function(t,e,i,r){arguments.length<4&&(r=null),arguments.length<3&&(i=n.getUniqueString()),(arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e),i=i||n.getUniqueString();var a=new u(t,e,i,r).clone();g.log("% {}",JSON.stringify(a)),S?history.replaceState(a,"","#"+N(t,e,r)):location.hash=N(t,e,r),k.currentState=a},D=function(t){if(null==t||""===String(t).trim())return null;var e=null,n=t.split(/\s*&\s*/);return 0!==n.length&&(e={},n.forEach(function(t){var n=t.split(/\s*=\s*/);e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),e},R=function(t){if(""===t)return null;var e=t.match(/^#([\w$\-]+)(?:@([^!]+))?(?:!+(.*))?/);if(null==e)return null;var i=e[1],r=e[2],a=D(e[3]);return n.isEmptyString(r,!0)&&(r="default"),{viewId:i,viewNamespace:r,options:a}},W=function(){return null==k.currentState?null:k.currentState.viewId},k=function(t,e){(arguments.length<2||n.isEmptyString(e,!0))&&(e="default");var a=null,o=document.querySelectorAll("#"+t+"[data-view=true]");if(0===o.length||function(){for(var t=0;t<o.length;t++){var i=o[t],r=i.getAttribute("data-view-namespace");if(n.isEmptyString(r,!0)&&(r="default"),r===e){a=i;break}}return null==a}())throw new Error("View of id: '"+t+"' within namespace: '"+e+"' does not exist!");var u={},l=new f,h=new s(t,e),v=new d(t,e);i(this,a);var w=this.fire;this.fire=function(t,e,n){u[t]=e,w(t,e,n)},n.defineReadOnlyProperty(this,"id",t),n.defineReadOnlyProperty(this,"namespace",e),n.defineReadOnlyProperty(this,"logger",r.ofName("View#"+t)),n.defineReadOnlyProperty(this,"config",h),n.defineReadOnlyProperty(this,"context",l),this.getLatestEventData=function(t){return u[t]},this.getContext=function(){return l},this.clearContext=function(){return l.clear(),this},this.getId=function(){return t},this.getNamespace=function(){return e},this.getDomElement=function(){return a},this.getGroupName=function(){var t=this.getDomElement().getAttribute("data-view-group");return null==t?t:String(t).toLowerCase()},this.find=function(t){return this.getDomElement().querySelector(t)},this.findAll=function(t){return this.getDomElement().querySelectorAll(t)},this.fulfillWantedData=function(t,e){var i=t+":fulFillCallback",r=this.getParameter(i);return"function"==typeof r&&(g.info("Found auto attached(by 'View.want()' method) fulfill listener(parameter name: '{}'), auto execute this listener with fulfilled data.",i),n.try2Call(r,null,e,{dataResolveMethod:"resolveLater"})),v.fulfill(t,e),this},this.isWantedDataFulfilled=function(t){return v.isFulfilled(t)},this.setLayoutAction=function(n,i){return arguments.length<2&&(i=!0),c.ofId(t,e).setIfLayoutWhenLayoutChanges(!!i).setLayoutAction(n),this},this.getLayoutAction=function(){return c.ofId(t,e).getLayoutAction()},this.hasParameter=function(t){if(null===t||void 0===t)return!1;var e=V(this.getId(),this.getNamespace());return null!=e&&t in e},this.getParameter=function(t){var e=V(this.getId(),this.getNamespace());return arguments.length<1?e:null==e?null:e[t]},this.seekParameter=function(t){if(this.hasParameter(t))return this.getParameter(t);if(k.hasActiveViewOption(t))return k.getActiveViewOption(t);var e=new RegExp("\\b"+t+"\\b=([^&\\?]*)"),n=location.search.match(e);return null==n?null:n=decodeURIComponent(n[1])},this.isReady=function(){return p.indexOf(this.getId())!==-1},this.isActive=function(){return this.getDomElement().classList.contains("active")},this.isDefault=function(){return/true/i.test(this.getDomElement().getAttribute("data-view-default"))},this.isDirectlyAccessible=function(){var t=this.getDomElement().getAttribute("data-view-directly-accessible");return t=null==t?null:t.toLowerCase(),k.isDirectlyAccessible()?"false"!==t:"true"===t},this.setAsDirectlyAccessible=function(t){return arguments.lengt<1&&(t=!0),this.getDomElement().setAttribute("data-view-directly-accessible",String(t)),this},this.setTitle=function(t){return null==t?(this.getDomElement().removeAttribute("data-view-title"),this):(t=String(t),this.getDomElement().setAttribute("data-view-title",t),this.isActive()&&(document.title=t),this)},this.getTitle=function(t){return this.getDomElement().getAttribute("data-view-title")},this.setFallbackViewId=function(t){if(null==t||""===t.trim())return this;if(n.ifStringEqualsIgnoreCase(":default-view",t)){var e=k.getDefaultView();if(null==e)return g.error("No default view found."),this;t=e.getId()}else if(/^~/.test(t)){var i=t.substring(1),r=Y(i);if(null==r)return g.warn("No view of group: {} found.",i),this;t=r}return k.ifExists(t)?this.getId()===t?this:(this.getDomElement().setAttribute("data-view-fallback",t),this):(g.warn("No view of id: {} found.",t),this)},this.getFallbackView=function(){for(var t=this,e=[this.getId()];;){var i=t.getDomElement().getAttribute("data-view-fallback");if(n.ifStringEqualsIgnoreCase(":default-view",i))return k.getDefaultView();if(/^~/.test(i)){var r=i.substring(1),a=Y(r);if(null==a)return k.getDefaultView();i=a}if(null==i||!k.ifExists(i))return g.warn("View: "+t.getId()+" is not permited to access directly, and no fallback configuration found, thus returning the default view"),k.getDefaultView();if(t=k.ofId(i),e.indexOf(t.getId())!==-1)return g.error("Cyclical reference of view on fallback configuration on view: {}. Chain: {}, view id: {}",this.getId(),e,t.getId()),k.getDefaultView();if(t.isDirectlyAccessible())return t;e.push(i)}},Object.freeze&&Object.freeze(this)};n.defineReadOnlyProperty(k,"SWITCHTYPE_HISTORYFORWARD","history.forward"),n.defineReadOnlyProperty(k,"SWITCHTYPE_HISTORYBACK","history.back"),n.defineReadOnlyProperty(k,"SWITCHTYPE_VIEWNAV","view.nav"),n.defineReadOnlyProperty(k,"SWITCHTYPE_VIEWCHANGE","view.change");var q=function(t){null!=t&&""!==String(t).trim()||(t=k.SWITCHTYPE_VIEWNAV);var e=n.ifStringEqualsIgnoreCase(t,k.SWITCHTYPE_VIEWNAV),i=n.ifStringEqualsIgnoreCase(t,k.SWITCHTYPE_VIEWCHANGE),r=n.ifStringEqualsIgnoreCase(t,k.SWITCHTYPE_HISTORYBACK),a=n.ifStringEqualsIgnoreCase(t,k.SWITCHTYPE_HISTORYFORWARD);return r||a||e||i||(t=k.SWITCHTYPE_VIEWNAV),t};k.currentState=null,k.Logger=r,k.layout=o,i(k),k.getViewContainerDomElement=function(){var t=document.querySelector("[data-view-container]");return null==t&&(t=document.body),t},k.ofId=function(t,e){(arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e);for(var i=v[e],r=0;r<i.length;r++)if(i[r].getId().trim()===t.trim()&&i[r].getNamespace().trim()===e.trim())return i[r];var a=new k(t,e);return i.push(a),a},k.ifExists=function(t,e){(arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e);for(var i=v[e],r=0;r<i.length;r++)if(i[r].getId().trim()===t.trim())return!0;return!1},k.isExisting=function(){return g.warn("This is method is deprecated, please use 'View.ifExists' instead."),k.ifExists.apply(k,arguments)},k.listAll=function(t){arguments.length>1&&(t=String(t).toLowerCase());var e=[];for(var i in v)e=e.concat(v[i]);return arguments.length<1||n.isEmptyString(t,!0)?e:e.filter(function(e){return t===e.getGroupName()})},k.listAllGroups=function(){return k.listAll().reduce(function(t,e){var n=e.getGroupName();return null==n||""===String(n).trim()||t.indexOf(n)!==-1?t:(t.push(n),t)},[])},k.setAsDefault=function(t,e){if((arguments.length<2||n.isEmptyString(e,!0))&&(e="default"),L(e),n.isEmptyString(t,!0))return g.warn("No view id supplied to set as default."),k;for(var i=O(),r=0;r<i.length;r++)i[r].removeAttribute("data-view-default");var a=P(t,e);return null==a?(g.error("No view dom element of id: '{}' namespace: '{}' found to set as default.",t,viewNamespace),k):(a.setAttribute("data-view-default","true"),k)},k.isDirectlyAccessible=function(){var t=h.getAttribute("data-view-directly-accessible");return n.ifStringEqualsIgnoreCase("true",t)},k.setIsDirectlyAccessible=function(t){return h.setAttribute("data-view-directly-accessible",String(!!t).toLowerCase()),k},k.getActiveView=function(){for(var t=k.listAll(),e=0;e<t.length;e++)if(t[e].isActive())return t[e];return null},k.getDefaultView=function(){for(var t=k.listAll(),e=0;e<t.length;e++)if(t[e].isDefault())return t[e];return null},k.setSwitchAnimation=function(t){if(!(t instanceof Function))throw new Error("Invalid argument. Animation of Function is needed.");return m=t,k},k.getSwitchAnimation=function(){return m},k.getActiveViewOptions=function(){var t=R(location.hash);return null==t?null:t.options},k.hasActiveViewOption=function(t){var e=k.getActiveViewOptions();return null!=e&&t in e},k.getActiveViewOption=function(t){var e=k.getActiveViewOptions();return null==e?null:e[t]},k.setActiveViewOption=function(t,e){if(null==t||""===String(t).trim())return g.error("Option name should not be empty."),k;var n=k.getActiveView();if(null==n)return g.error("No active view to set option {} = {}.",t,e),k;t=String(t).trim(),e=String(e).trim();var i=k.getActiveViewOptions()||{};return i[t]=e,x(n.getId(),n.getNamespace(),k.currentState?k.currentState.sn:null,i),k},k.wantData=function(t,e,n,i,r){"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&("string"==typeof arguments[2]||(r=arguments[3],i=arguments[2],n=arguments[1],e="default"));var a=d.ofName(t,e,n);if("function"!=typeof r){var o=n+":fulFillCallback";g.info("No parameter meaning 'callback for situation that wanted data is currently not fulfilled' specified, auto assign as View.navTo('{}', {params: {'{}': function(){...}}})",t,o);var u={};u[o]=i,r=function(){k.navTo(t,e,{params:u})}}return a.want(i,r),k},k.listenWantedData=function(t,e,n,i){return"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&("string"==typeof arguments[2]||(i=arguments[2],n=arguments[1],e="default")),d.ofName(t,e,n).listen(i),k},k.implIsPortrait=function(t){return c.implIsPortrait.apply(c,arguments),k};var H=function(t){t=n.setDftValue(t,{srcView:null,targetView:null,type:k.SWITCHTYPE_VIEWNAV,withAnimation:!0,params:null});var e=t.srcView,i=t.targetView,r=q(t.type),a=t.params,o=n.ifStringEqualsIgnoreCase(r,k.SWITCHTYPE_HISTORYBACK),u=n.ifStringEqualsIgnoreCase(r,k.SWITCHTYPE_HISTORYFORWARD),l={currentView:e,targetView:i,type:r,params:a},s=function(){var t=i.getId(),n=i.getNamespace();C(t,n),o?E(":back","")&&(I(t,n,V(":back","")),C(":back","")):u?E(":forward","")&&(I(t,n,V(":forward","")),C(":forward","")):I(t,n,a);var s={sourceView:e,type:r,params:a},f=function(t,e){try{i.fire(t,s,e)}catch(e){g.error("Error occured while firing event: {} with data: {}",t,s),e instanceof Error?console.error(e,e.stack):console.error(e)}};e&&e.getDomElement().classList.remove("active"),e&&e.fire("leave",{targetView:i,type:r}),f("beforeenter",!1),i.getDomElement().classList.add("active"),c.ofId(t,n).doLayout(),k.fire("change",l,!1),i.isReady()||(p.push(t),f("ready",!1)),f("enter",!1),f("afterenter",!1),k.fire("afterchange",l)}
;k.fire("beforechange",l,!1),t.withAnimation&&m?m.call(null,e?e.getDomElement():null,i.getDomElement(),r,s):s()},U=function(t,e,i){if((arguments.length<2||"string"!=typeof e||n.isEmptyString(e,!0))&&(e="default"),L(e),i=n.setDftValue(i,{},!0),!k.ifExists(t,e))throw g.log("Trying to navigate to view: '{}' within namespace: '{}' with params: {}, options: {}",t,e,i.params,i.options),new Error("Target view: '"+t+"' within namespace: '"+e+"' does not exist!");var r=k.getActiveView();g.log("{}@{} → {}@{} {}",r?r.getId():null,r?r.getNamespace():null,t,e,JSON.stringify(i));var a=k.ofId(t,e);return i.srcView=r,i.targetView=a,H(i),k};k.show=U;var Y=function(t){if(null==t||""===String(t).trim())return g.error("Empty view group name!."),null;t=String(t).trim().toLowerCase();var e=k.listAll(t);if(null==e||0===e.length)return g.error("No view of group: {} found.",t),null;var n=e.map(function(t){return t.getId()}),i=n[0];return g.info("Found {} views of group: {}: {}, using the first one: {}.",n.length,t,n,i),i};k.passBy=function(t,e){if((arguments.length<2||"string"!=typeof e||n.isEmptyString(e,!0))&&(ops=e,e="default"),L(e),n.ifStringEqualsIgnoreCase(":default-view",t)){var i=k.getDefaultView();if(null==i)return g.error("No default view found."),k;t=i.getId()}if(/^~/.test(t)){var r=t.substring(1),a=Y(r);if(null==a)return k;t=a}return k.ifExists(t,e)?(T(t,e),k):(console.error(new Error("Target view: '"+t+"' within namespace: '"+e+"' does not exist!")),k)},k.navTo=function(t,e,i){(arguments.length<2||"string"!=typeof e||n.isEmptyString(e,!0))&&(i=e,e="default"),L(e),t=t.trim(),i=n.setDftValue(i,{});W(),k.getActiveView();if(n.ifStringEqualsIgnoreCase(":back",t))return k.back(i),k;if(n.ifStringEqualsIgnoreCase(":forward",t))return k.forward(i),k;if(n.ifStringEqualsIgnoreCase(":default-view",t)){var r=k.getDefaultView();if(null==r)return g.error("No default view found."),k;t=r.getId()}if(/^~/.test(t)){var a=t.substring(1),o=Y(a);if(null==o)return k;t=o}if(!k.ifExists(t,e)){g.log("Trying to navigate to view: '{}' within namespace: '{}' with params: {}, options: {}",t,e,i.params,i.options);var u=new Error("Target view: '"+t+"' within namespace: '"+e+"' does not exist! Firing event 'viewnotexist'...");return console.error(u),k.fire("viewnotexist",{targetViewId:t,targetViewNamespace:e}),k}return i.type=k.SWITCHTYPE_VIEWNAV,T(t,e,null,null==i?null:i.options),U(t,e,i),k},k.changeTo=function(t,e,i){(arguments.length<2||"string"!=typeof e||n.isEmptyString(e,!0))&&(i=e,e="default"),L(e),i=n.setDftValue(i,{});W(),k.getActiveView();if(n.ifStringEqualsIgnoreCase(":default-view",t)){var r=k.getDefaultView();if(null==r)return void g.error("No default view found.");t=r.getId()}if(/^~/.test(t)){var a=t.substring(1),o=Y(a);if(null==o)return k;t=o}if(!k.ifExists(t,e)){g.log("Trying to navigate to view: '{}' within namespace: '{}' with params: {}, options: {}",t,e,i.params,i.options);var u=new Error("Target view: '"+t+"' within namespace: '"+e+"' does not exist! Firing event 'viewnotexist'...");return console.error(u),k.fire("viewnotexist",{targetViewId:t,targetViewNamespace:e}),k}return i.type=k.SWITCHTYPE_VIEWCHANGE,x(t,e,null,null==i?null:i.options),U(t,e,i),k},k.back=function(t){return C(":back"),null!=t&&"params"in t&&I(":back","",t.params),history.go(-1),k},k.forward=function(t){return C(":forward"),null!=t&&"params"in t&&I(":forward","",t.params),history.go(1),k};var _=document.title;k.setDocumentTitle=function(t){return n.isEmptyString(t,!0)?(g.warn("Invalid document title: "+t),k):(document.title=_=t,k)},k.onceHistoryBack=function(t){if("function"!=typeof t)throw new Error("Invalid argument! Type of 'Function' is needed.");return l.pushState(n.randomString(),t),k},k.reDoLayout=function(){return k.listAll().forEach(function(t){n.try2Call(t.getLayoutAction())}),k};var M,F,B,j,z,J=!1,G=!1,Q=function(){var t=k.getActiveView();return null==t&&(t=k.getDefaultView()),t},X=function(t,e){(arguments.length<2||"string"!=typeof e||n.isEmptyString(e,!0))&&(e="default"),L(e);var i=null;return n.isEmptyString(t,!0)||!k.ifExists(t)?i=Q():(i=k.ofId(t,e),i.isDirectlyAccessible()||(i=i.getFallbackView())),i},K=function(t){var e=k.getActiveView(),n=null==e?null:e.getId(),i=null==e?null:e.getNamespace();g.log("{} Current: {}",S?"State poped!":"Hash changed!",e&&e.getId()),g.log("↑ {}",S?JSON.stringify(t.state):location.hash);var r,a,o,l=k.SWITCHTYPE_VIEWNAV,s=null;if(null==t.state){l=k.SWITCHTYPE_VIEWNAV;var f,c,d=R(location.hash);if(null==d?(s=e,f=n,c=i):(r=d.viewId,a=d.viewNamespace,null!=(s=X(r,a))&&(f=s.getId(),c=s.getNamespace())),null!=f){var h=f==r&&c==a;o=f==n&&c==i?k.currentState?k.currentState.options:null:h?d.options:null,x(f,c,null,o),k.show(s.getId(),s.getNamespace(),{type:l,options:o})}}else if(u.isConstructorOf(t.state)){var v=t.state;r=v.viewId,a=v.viewNamespace,k.ifExists(r,a)?(s=k.ofId(r,a),o=v.options):(g.warn("Popped view: '"+r+"' within namespacer: '"+a+"' does not exist, keeping current."),s=e,o=null);var f=s.getId(),c=s.getNamespace();null!=k.currentState&&(l=v.sn<k.currentState.sn?k.SWITCHTYPE_HISTORYBACK:k.SWITCHTYPE_HISTORYFORWARD),x(f,c,v.sn,o),k.show(f,c,{type:l,options:o})}else g.info("Skip state: {}",t.state)},$=function(){M(),h.setAttribute("data-view-os",n.env.isIOS?"ios":n.env.isAndroid?"android":n.env.isWindowsPhone?"wp":"unknown"),window.addEventListener(S?"popstate":"hashchange",K),function(){var t=document.querySelectorAll("[data-view-container]");if(0===t.length)document.body.setAttribute("data-view-container","");else for(var e=1;e<t.length;e++)t[e].removeAttribute("data-view-container")}();var t=O(),e=[];[].forEach.call(t,function(t){var i=t.getAttribute("data-view-namespace");n.isEmptyString(i,!0)&&(i="default",t.setAttribute("data-view-namespace",i));var r=t.id;e.indexOf(r)!==-1&&g.warn("Multiple view of id: '{}' exists.",r),k.ofId(r,i),e.push(r),t.classList.remove("active"),t.classList.add("view"),function(){k.ofId(r,i).on("enter",function(){var e=t.getAttribute("data-view-title");document.title=null==e?_:e})}()});var i=null;i=function(){for(var e=null,n=-1,i=0;i<t.length;i++)if("true"===t[i].getAttribute("data-view-default")){n=i;break}if(-1!==n){e=t[n];for(var i=n+1;i<t.length;i++)"true"===t[i].getAttribute("data-view-default")&&t[i].removeAttribute("data-view-default")}else 0!==t.length?(e=t[0],e.setAttribute("data-view-default","true")):g.warn("No view exists to determine the default view.");return e}(),null!=i&&i.classList.add("active"),function(){a.addTapListener(h,function(t){for(var e,i=t.changedTouches?t.changedTouches[0].target:t.target,r=i;null==r.getAttribute("data-view-rel")&&(r=r.parentNode,r instanceof HTMLElement||(r=null),null!=r););if(null!=r&&(e=r.getAttribute("data-view-rel")),null!=e&&""!==e.trim()){if(!("true"===r.getAttribute("data-view-rel-disabled"))){if(t.preventDefault(),/^(http|https|ftp):\/\//gim.test(e))return void(window.location.href=e);if(/^\s*@+/.test(e)){var a=e.replace(/^\s*@+/,"").trim();return""===a?void g.warn("Empty file path for data-view-rel: '{}'",e):void(window.location.href=a)}if(n.ifStringEqualsIgnoreCase(":back",e))return void history.go(-1);if(n.ifStringEqualsIgnoreCase(":forward",e))return void history.go(1);if(n.ifStringEqualsIgnoreCase(":default-view",e)){var o=k.getDefaultView();e=null==o?null:o.getId()}var u=null;if(/^~/.test(e)){var l=e.match(/^~([^!]+)(?:!+(.*))?/);if(null==l)return;var s=l[1].trim(),f=D(l[2]),c=Y(s);if(null==c)return;e=c,u=f}else{var d=R("#"+e);e=d.viewId,u=d.options}var h=r.getAttribute("data-view-rel-namespace");n.isEmptyString(h,!0)&&(h="default");var v=r.getAttribute("data-view-rel-type");v=n.isEmptyString(v,!0)?"nav":v,/^(?:nav)|(?:change)$/.test(v)||(g.warn("Unknown view switch type: {}. {}",v,r),v="nav"),k[v+"To"](e,h,{options:u})}}},{useCapture:!0})}(),function(){var t=document.documentElement.getAttribute("data-view-whr");if(null!=t&&""!==(t=t.trim().toLowerCase())){var e=/(\d+(?:\.\d*)?)\s*\/\s*(\d+(?:\.\d*)?)/i,n=t.match(e);null==n?(g.warn("Invalid view expected width height ratio: {}. Value such as '320/568'(iPhone 5) is valid. Using '{}' instead.",t,y),n=y.exec(e)):g.info("Using specified expected width height ratio: {}",t),o.setExpectedWidthHeightRatio(Number(n[1])/Number(n[2])).init();!function(){for(var t=document.querySelectorAll("input, select, textarea, *[contentEditable]"),e=0;e<t.length;e++)t[e].blur();o.doLayout()}()}}(),g.info("Marking View as initialized and ready"),F(),B(),function(){if(null!=k.currentState)return void g.debug("Skip showing specified view.");var t=null==i?null:i.id,e=null==i?null:i.getAttribute("data-view-namespace")||"default",r=R(location.hash),a=null==r?null:r.viewId,o=null==r?null:r.viewNamespace,u=null==r?null:r.options,l=null,s=null,f=n.isEmptyString(t,!0);if(!n.isEmptyString(a,!0)&&k.ifExists(a,o)?(l=a,s=o):(g.warn("No view of id: '{}' namespace: '{}'(specified in the location hash) found, trying to show the default view",a,o),!f&&k.ifExists(t,e)?(l=t,s=e):(g.warn("No default view(id: '{}', namespace: '{}') found.",t,e),l=null,s=null)),n.isEmptyString(l,!0))return void g.warn("Can not determine the initial view!");var c=X(l,s);if(null==c)return void g.error("No final view found for view of id: '{}', namespace: '{}'",l,s);l=c.getId(),s=c.getNamespace(),l==a&&s==o||(u=null),g.info("Showing view: '{}' within namespace: '{}'",l,s),x(l,s,null,u);var d=k.getActiveView();H({srcView:d==c?null:d,targetView:c,withAnimation:!1,params:null})}()};k.beforeInit=function(){var t=[];return M=function(){for(var e=0;e<t.length;e++)n.try2Call(t[e]);t=[]},F=function(){J=!0},function(e){return J?k:t.indexOf(e)!==-1?k:(t.push(e),k)}}(),k.ready=function(){var t=[];return B=function(){G=!0;for(var e=0;e<t.length;e++)n.try2Call(t[e]);t=[]},function(e){return G?(n.try2Call(e),k):t.indexOf(e)!==-1?k:(t.push(e),k)}}(),k.setInitializer=function(t,e){if("function"==typeof t){arguments.length<2&&(e="domready");var n="domready, rightnow".split(/\s*,\s*/);n.indexOf(e)===-1&&(g.warn("Unknown initializer exec time: {}. Supported: {}",e,n),e="domready"),j=t,z=e,J||"rightnow"!==e||(g.info("Calling specified view initializer right now"),t($))}},document.addEventListener("DOMContentLoaded",function(){null==j?(g.info("Initializing View automatically"),$()):"domready"===z&&(g.info("Calling specified view initializer on dom ready"),j($))}),t[e]=k}(window,"View");